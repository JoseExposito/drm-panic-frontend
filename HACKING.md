# DRM Panic Frontend Hacking

## Running a local Bugzilla server

In order to test the bug reporting functionality, it is recommended to run a
local Bugzilla server. For simplicity, we'll use Docker.

This guide assumes basic Docker knowledge and a functional Docker installation.

Start by cloning Bugzilla's source code and using a know commit:

```bash
$ git clone https://github.com/bugzilla/bugzilla.git
$ cd bugzilla
$ git checkout 6525e6d90f15fed7d87f591f38f5578ce403dc1b
```

There is a bug in the Dockerfile that prevents creating and searching issues due
to missing "tzdata" package. Add it to the Dockerfile:

```bash
$ nano Dockerfile
# Add tzdata
RUN apt-get -y install \
 tzdata \
 [...]
```

Build the image:

```bash
$ docker-compose build
```

And run it:

```bash
$ docker-compose up
```

The user and password for the default admin account will be displayed once the
server is running.

Once you are done, stop the images:

```bash
$ docker-compose stop
```

### Useful commands

To access the Bugzilla web container:

```bash
$ docker exec -it bugzilla-bugzilla5.web-1 bash
```

To access the Bugzilla database container:

```bash
$ docker exec -it bugzilla-bugzilla5.db-1 bash
$ mysql -h localhost -u root -p
# Password: bugzilla
> USE bugs;
```

### Creating the environment

We need to mimic certain fields to make our development environment similar to
the Bugzilla instance in production.

Login with the default user and password:

- admin@bugzilla.test
- password01!

#### Disable email

To avoid setting up a email server we'll disable it.

On Bugzilla's homepage, click on "Administration" > "Parameters" > "Email" or
follow this link:

http://127.0.0.1:8080/editparams.cgi?section=mta

And change the "mail_delivery_method" to "None".

#### Minimal product and component

Back to "Administration" > "Products" and "Add product" or follow this link:
http://127.0.0.1:8080/editproducts.cgi?action=add&classification=Unclassified

Enter these details:

- Product: Fedora
- Description: Fedora test product
- Component: kernel
- Component Description: Linux kernel test component
- Default Assignee: admin@bugzilla.test

And click "Add".

#### Getting an API key

Next, get an API key. In the homepage click "Preferences" > "API Keys" or follow
this link:
http://127.0.0.1:8080/userprefs.cgi?tab=apikey

Check the "Generate a new API key with optional description" checkbox and click
"Submit Changes".


## Running the DRM Panic Frontend

Start by installing the dependencies:

```bash
$ npm install
```

Next, copy the .env template and update the .env file with your values:

```bash
$ cp .env.example .env
# Open the .env file and set the correct values
```

And finally, start the development server:

```bash
$ npm start
```

If you are using VScode, press F5 to start debugging.

### Example URL

This URL can be used for testing:

http://localhost:8888/#?a=x86_64&v=6.17.0-rc2+&z=6176553531320148064248174172049462376936153019994356550183721585883404587084065352918456816574065899724609083840963027850505170758059876696736094149360883492199783376262049059148043413969060356749638844252523205960813142015576425062277250266002999563069282598419359124756332529396032102288650121448528758136812681630076401024265852145240321337911744563016733288225397518473762299830269378885644283537110511493992669240713648750355160701175822589277552134305790831613565291115358337612020323432638554299197581654787339095754461260404477296705641718453834578003984541138833837991359574159641774123326426086108359853048525640806957960812119212857053302589007757715664194160309670672435654207900834673047422655937474490338418736199860766599999761255826043566558832824014083171723574192011906462565185837316799795320434043033252000134276148895951599938401701372304007308621372548458591118147247477707484812443412032902132815256353179259808927736506606182269652925805599347144108258628871357959013762057067316479019436565411922523247885846602051449832139545489354932001088612531806317520120443442266791162203155461762144111606561321326720281677426489053314520044477967696627413856253482816039594625947951334298657609509269403142784624919814167075328382695834125136552812694853419530985830941372363324042273890252242199708305394538074661076402151694467380765888543320031137149415322502268337865582276731476357139961919380783347647658114582441991437071914356914069856556325344664818385906666331809437859613756816840160100625696231775890512335239833476184805593654189153049212129016545618384151452001888603661644742122188674309697956511121790439043052430314064109272140161835308069153984539881030284736629842944400881198682792377676449488008675257220459742691452118973848173268369175016017567271075488433633902316374900164112472240527183830152421347800430017352227682286983320495070464336314664813221128863447483725012197958534949566212371062628503936139145346446709638160965667847290498235827398451842125880417191832502356098525922485114759203231267122499711359704432638284451216803654401997277871801955280605990350633072266523115813290860190715853765010989537789659836807704197183449302509031338887365951814085447719820570060365056779295802657278249120626518160744544139541855438531977692974544338183033998470312412326612899617953375791528982720966222941325343551933392856116514952632304303982143178599251591112227793893142047022466005756449545239303832171832120102721973102572339589489374196674775364460632829183517071745844046766949437579553342136391339370974236423594592718722589273717728033731811288770603410661536171167117630844290276287404920623006209623289889548470800763903840077067140257184913012992973004457612984079265689156156068507207093429406913705130449991671865835701005707762326101444066783589691723813468098210824964399652817985658460359491778885362028316369909513117257143470060065764102116210902346377955150297211073674165039966219977924894095226888077030209133967355185250503180590587095664054165487967496479110406552805665820415682177134330698221071213597301481538020947361957500546332726631048513997462075450732938753544579183260207245332372044503085283154488002521540048265045706084859868826728727109701293216200600759021256239391490290864289342715831430694073306739820493157549156339394600797695135348686592790069066027790071949150237662709799437566931295922032856855026873443335821458885619040468794626622046417961441180187356455662432258120159166322401795879838269837214573196544424614272156808742191224758278257597317746978100679879348304649621938734462913616106824815446943083057185370163612749104246748770480875880348004950468522355419749886402248771149974715240845512958673149435153491820173184626091652866414594262716137378566361470590087685488054024290837659146134432574143178996180141825445425846225923425399447737268326918778773072514986816963597502157552680874025058468033821993506376701773061775912727083616040778536387377467459358448263686566584660273042256180218752648638894343760255614804396914625568979909148201808520755888233398242990837173193630474473934010238566659892592395116465599086012227803479537924490235812686709301982186562008419757996131370100943260021329253357726365649500468070608313536942048837447686307247698472898232694628434881169894250804357424964257739018621327892092930505550179436421641433715248748079545150220734414977655152295412933419436922450333632360390673942624614470499265256426739283891494316995143830604159231784734168973094238270232481741842431302509568366257817967422916784657460435598333050153747894379828428024015458024691073717390144549651453785226933199636021249939187972938190504034075467614711773829845268361694920831163840258930664986367790520108550822377716178311617413628971370989213717881984966030452490847605253132362420151631224611463965427582436564054688973402580420866492868510385164603267330775070028977509707626842985972383807111848361934684461301013084299222794770218231052960851101067526969747613218743226620929191096831969582694732922059980335335419246718764855713179126462907686202670555825171832076495879994578711344508187898537670633579678188881433011810626535986004059895696319256856513194703436553319925147476732121774459110426741193316858606419257808993976231721934419131725018223401759548260548567302126967504962775985451448722336641298312098076395171272197055730573409187121456610076199458089832657077780702353986528223159971842561815922909594248630685947079051530182097062301404739723376641976618676191561408868786733256401918458567313903286878754005962472349882106035881956737181355302590391841286187331561276718321986210129719546014474086619253419672029504645779021849442912153051071851224319991606182288599082184211856538648824165651246891733932620687847982256874654208723875156484139638422758838349427258205273403426762375664913196321796501749910796460484550114159961630015242927128753123343768060141264769750042433361509172805630427655250829325215483589802088815770451174252460273946106125059118303838224423683325835763899140263752845535137352031268522319639649598673215733422782148859833318912588026128336739939808077664653323433899935536289610528089488212595236564378190180335928292684524794915230258729126868437758126371071552906115427527216009569230658018898393403333922016154088394200142873669908674384565278292194157282162605104607617151358055739615016196541423832336210004481809055492916313424774003947006094994090140803504881780849261668688274340533302458473027555732071246314176057789852680224904736171154241695758018522852165628301597516482266189749498719555482877882767030748363328078565413192005405209133163584192686853863982573759877756061100862543251335373779139408984758303996337405540361726219971949664959544194640651766146344235133953160239417457620134326892534553613549567530683496571016244865576559126
